<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å»Ÿæœƒç®¡ç†ç³»çµ± - æ–°å¢æ´»å‹•</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; background: #f4f4f4; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea { width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        button { background: #d32f2f; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-size: 16px; }
        button:hover { background: #b71c1c; }
    </style>
</head>
<body>

    <h2>ğŸ® å»Ÿæœƒæ´»å‹•ç™¼ä½ˆ</h2>
    
    <div class="form-group">
        <label>æ´»å‹•æ—¥æœŸ (å¿…å¡«)</label>
        <input type="date" id="eventDate" required>
    </div>
    <div class="form-group">
        <label>æ´»å‹•åç¨± (å¿…å¡«)</label>
        <input type="text" id="eventName" placeholder="ä¾‹å¦‚ï¼šå¤§ç”²åª½ç¥–é¶å¢ƒ" required>
    </div>
    <div class="form-group">
        <label>å®®å€/å ‚å€ (å¿…å¡«)</label>
        <input type="text" id="eventLocation" placeholder="è«‹è¼¸å…¥åœ°å€" required>
    </div>
    <div class="form-group">
        <label>ç›¸é—œé€£çµ (FBæˆ–å®˜ç¶²)</label>
        <input type="url" id="eventLink" placeholder="https://...">
    </div>
    <div class="form-group">
        <label>é™£é ­åˆ—è¡¨</label>
        <textarea id="paradeList" rows="3" placeholder="åˆ—å‡ºåƒèˆ‡é™£é ­"></textarea>
    </div>
    <div class="form-group">
        <label>è·¯é—œè¡¨ (é€£çµæˆ–èªªæ˜)</label>
        <textarea id="routeMap" rows="3" placeholder="è«‹è¼¸å…¥è·¯ç·šèªªæ˜æˆ–åœ–ç‰‡ç¶²å€"></textarea>
    </div>
    <div class="form-group">
        <label>å…¶ä»–å‚™è¨»</label>
        <textarea id="notes" rows="2"></textarea>
    </div>

    <button onclick="uploadData()">ç™¼ä½ˆæ´»å‹•</button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // --- æ›¿æ›æˆä½ çš„ Firebase Config ---
        const firebaseConfig = {
            apiKey: "ä½ çš„API_KEY",
            authDomain: "ä½ çš„å°ˆæ¡ˆID.firebaseapp.com",
            databaseURL: "https://ä½ çš„å°ˆæ¡ˆID-default-rtdb.firebaseio.com",
            projectId: "ä½ çš„å°ˆæ¡ˆID",
            storageBucket: "ä½ çš„å°ˆæ¡ˆID.appspot.com",
            messagingSenderId: "...",
            appId: "..."
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // é€å‡ºè³‡æ–™çš„å‡½æ•¸
        window.uploadData = function() {
            const date = document.getElementById('eventDate').value;
            const name = document.getElementById('eventName').value;
            const location = document.getElementById('eventLocation').value;

            if(!date || !name || !location) {
                alert("è«‹å¡«å¯«å¿…å¡«æ¬„ä½ï¼");
                return;
            }

            const eventData = {
                date: date,
                name: name,
                location: location,
                link: document.getElementById('eventLink').value,
                paradeList: document.getElementById('paradeList').value,
                routeMap: document.getElementById('routeMap').value,
                notes: document.getElementById('notes').value
            };

            // æ¨é€åˆ° Firebase çš„ 'events' è·¯å¾‘ä¸‹
            push(ref(db, 'events'), eventData)
                .then(() => {
                    alert("ç™¼ä½ˆæˆåŠŸï¼");
                    // æ¸…ç©ºè¡¨å–®
                    document.querySelectorAll('input, textarea').forEach(el => el.value = '');
                })
                .catch((error) => alert("å‡ºéŒ¯äº†ï¼š" + error.message));
        }
    </script>
</body>
</html>